{"filter":false,"title":"NewTodoInput.jsx","tooltip":"/project-final-initial/cd12101-Deploy-Application-with-AWS-Lambda/starter/client/src/components/NewTodoInput.jsx","undoManager":{"mark":3,"position":3,"stack":[[{"start":{"row":0,"column":0},"end":{"row":59,"column":0},"action":"remove","lines":["import { useAuth0 } from '@auth0/auth0-react'","import dateFormat from 'dateformat'","import React, { useState } from 'react'","import { Divider, Grid, Input } from 'semantic-ui-react'","import { createTodo } from '../api/todos-api'","","export function NewTodoInput({ onNewTodo }) {","  const [newTodoName, setNewTodoName] = useState('')","","  const { getAccessTokenSilently } = useAuth0()","","  const onTodoCreate = async (event) => {","    try {","      const accessToken = await getAccessTokenSilently({","        audience: process.env.REACT_APP_AUTH0_AUDIENCE,","        scope: 'write:todos'","      })","      const dueDate = calculateDueDate()","      const createdTodo = await createTodo(accessToken, {","        name: newTodoName,","        dueDate","      })","      onNewTodo(createdTodo)","    } catch (e) {","      console.log('Failed to created a new TODO', e)","      alert('Todo creation failed')","    }","  }","","  return (","    <Grid.Row>","      <Grid.Column width={16}>","        <Input","          action={{","            color: 'teal',","            labelPosition: 'left',","            icon: 'add',","            content: 'New task',","            onClick: onTodoCreate","          }}","          fluid","          actionPosition=\"left\"","          placeholder=\"To change the world...\"","          onChange={(event) => setNewTodoName(event.target.value)}","        />","      </Grid.Column>","      <Grid.Column width={16}>","        <Divider />","      </Grid.Column>","    </Grid.Row>","  )","}","","function calculateDueDate() {","  const date = new Date()","  date.setDate(date.getDate() + 7)","","  return dateFormat(date, 'yyyy-mm-dd')","}",""],"id":3},{"start":{"row":0,"column":0},"end":{"row":58,"column":0},"action":"insert","lines":["import { useAuth0 } from '@auth0/auth0-react'","import dateFormat from 'dateformat'","import React, { useState } from 'react'","import { Divider, Grid, Input } from 'semantic-ui-react'","import { createTodo } from '../api/todos-api'","","export function NewTodoInput({ onNewTodo }) {","  const [newTodoName, setNewTodoName] = useState('')","","  // We pass this function to todos-api","  const { getAccessTokenSilently } = useAuth0()","","  const onTodoCreate = async () => {","    try {","      const dueDate = calculateDueDate()","","      // ⬅ FIX: Pass getAccessTokenSilently instead of token string","      const createdTodo = await createTodo(getAccessTokenSilently, {","        name: newTodoName,","        dueDate","      })","","      onNewTodo(createdTodo)","    } catch (e) {","      console.log('Failed to created a new TODO', e)","      alert('Todo creation failed')","    }","  }","","  return (","    <Grid.Row>","      <Grid.Column width={16}>","        <Input","          action={{","            color: 'teal',","            labelPosition: 'left',","            icon: 'add',","            content: 'New task',","            onClick: onTodoCreate","          }}","          fluid","          actionPosition=\"left\"","          placeholder=\"To change the world...\"","          onChange={(event) => setNewTodoName(event.target.value)}","        />","      </Grid.Column>","      <Grid.Column width={16}>","        <Divider />","      </Grid.Column>","    </Grid.Row>","  )","}","","function calculateDueDate() {","  const date = new Date()","  date.setDate(date.getDate() + 7)","  return dateFormat(date, 'yyyy-mm-dd')","}",""]}],[{"start":{"row":0,"column":0},"end":{"row":58,"column":0},"action":"remove","lines":["import { useAuth0 } from '@auth0/auth0-react'","import dateFormat from 'dateformat'","import React, { useState } from 'react'","import { Divider, Grid, Input } from 'semantic-ui-react'","import { createTodo } from '../api/todos-api'","","export function NewTodoInput({ onNewTodo }) {","  const [newTodoName, setNewTodoName] = useState('')","","  // We pass this function to todos-api","  const { getAccessTokenSilently } = useAuth0()","","  const onTodoCreate = async () => {","    try {","      const dueDate = calculateDueDate()","","      // ⬅ FIX: Pass getAccessTokenSilently instead of token string","      const createdTodo = await createTodo(getAccessTokenSilently, {","        name: newTodoName,","        dueDate","      })","","      onNewTodo(createdTodo)","    } catch (e) {","      console.log('Failed to created a new TODO', e)","      alert('Todo creation failed')","    }","  }","","  return (","    <Grid.Row>","      <Grid.Column width={16}>","        <Input","          action={{","            color: 'teal',","            labelPosition: 'left',","            icon: 'add',","            content: 'New task',","            onClick: onTodoCreate","          }}","          fluid","          actionPosition=\"left\"","          placeholder=\"To change the world...\"","          onChange={(event) => setNewTodoName(event.target.value)}","        />","      </Grid.Column>","      <Grid.Column width={16}>","        <Divider />","      </Grid.Column>","    </Grid.Row>","  )","}","","function calculateDueDate() {","  const date = new Date()","  date.setDate(date.getDate() + 7)","  return dateFormat(date, 'yyyy-mm-dd')","}",""],"id":8},{"start":{"row":0,"column":0},"end":{"row":58,"column":0},"action":"insert","lines":["import { useAuth0 } from '@auth0/auth0-react'","import dateFormat from 'dateformat'","import React, { useState } from 'react'","import { Divider, Grid, Input } from 'semantic-ui-react'","import { createTodo } from '../api/todos-api'","","export function NewTodoInput({ onNewTodo }) {","  const [newTodoName, setNewTodoName] = useState('')","","  // Pass this function into todos-api (not the token)","  const { getAccessTokenSilently } = useAuth0()","","  const onTodoCreate = async () => {","    try {","      const dueDate = calculateDueDate()","","      // ✔ Correct: pass getAccessTokenSilently to createTodo","      const createdTodo = await createTodo(getAccessTokenSilently, {","        name: newTodoName,","        dueDate","      })","","      onNewTodo(createdTodo)","    } catch (e) {","      console.log('Failed to created a new TODO', e)","      alert('Todo creation failed')","    }","  }","","  return (","    <Grid.Row>","      <Grid.Column width={16}>","        <Input","          action={{","            color: 'teal',","            labelPosition: 'left',","            icon: 'add',","            content: 'New task',","            onClick: onTodoCreate","          }}","          fluid","          actionPosition=\"left\"","          placeholder=\"To change the world...\"","          onChange={(event) => setNewTodoName(event.target.value)}","        />","      </Grid.Column>","      <Grid.Column width={16}>","        <Divider />","      </Grid.Column>","    </Grid.Row>","  )","}","","function calculateDueDate() {","  const date = new Date()","  date.setDate(date.getDate() + 7)","  return dateFormat(date, 'yyyy-mm-dd')","}",""]}],[{"start":{"row":0,"column":0},"end":{"row":58,"column":0},"action":"remove","lines":["import { useAuth0 } from '@auth0/auth0-react'","import dateFormat from 'dateformat'","import React, { useState } from 'react'","import { Divider, Grid, Input } from 'semantic-ui-react'","import { createTodo } from '../api/todos-api'","","export function NewTodoInput({ onNewTodo }) {","  const [newTodoName, setNewTodoName] = useState('')","","  // Pass this function into todos-api (not the token)","  const { getAccessTokenSilently } = useAuth0()","","  const onTodoCreate = async () => {","    try {","      const dueDate = calculateDueDate()","","      // ✔ Correct: pass getAccessTokenSilently to createTodo","      const createdTodo = await createTodo(getAccessTokenSilently, {","        name: newTodoName,","        dueDate","      })","","      onNewTodo(createdTodo)","    } catch (e) {","      console.log('Failed to created a new TODO', e)","      alert('Todo creation failed')","    }","  }","","  return (","    <Grid.Row>","      <Grid.Column width={16}>","        <Input","          action={{","            color: 'teal',","            labelPosition: 'left',","            icon: 'add',","            content: 'New task',","            onClick: onTodoCreate","          }}","          fluid","          actionPosition=\"left\"","          placeholder=\"To change the world...\"","          onChange={(event) => setNewTodoName(event.target.value)}","        />","      </Grid.Column>","      <Grid.Column width={16}>","        <Divider />","      </Grid.Column>","    </Grid.Row>","  )","}","","function calculateDueDate() {","  const date = new Date()","  date.setDate(date.getDate() + 7)","  return dateFormat(date, 'yyyy-mm-dd')","}",""],"id":9},{"start":{"row":0,"column":0},"end":{"row":63,"column":0},"action":"insert","lines":["import { useAuth0 } from '@auth0/auth0-react'","import dateFormat from 'dateformat'","import React, { useState } from 'react'","import { Divider, Grid, Input } from 'semantic-ui-react'","import { createTodo } from '../api/todos-api'","","export function NewTodoInput({ onNewTodo }) {","  const [newTodoName, setNewTodoName] = useState('')","","  const { getAccessTokenSilently } = useAuth0()","","  const onTodoCreate = async () => {","    try {","      const accessToken = await getAccessTokenSilently({","        audience: process.env.REACT_APP_AUTH0_AUDIENCE,","        scope: \"openid profile email\"","      })","","      const dueDate = calculateDueDate()","","      // ✔ FIX: pass the real token, not the function","      const createdTodo = await createTodo(accessToken, {","        name: newTodoName,","        dueDate","      })","","      onNewTodo(createdTodo)","","    } catch (e) {","      console.log(\"Failed to create a new TODO\", e)","      alert(\"Todo creation failed\")","    }","  }","","  return (","    <Grid.Row>","      <Grid.Column width={16}>","        <Input","          action={{","            color: 'teal',","            labelPosition: 'left',","            icon: 'add',","            content: 'New task',","            onClick: onTodoCreate","          }}","          fluid","          actionPosition=\"left\"","          placeholder=\"To change the world...\"","          onChange={(event) => setNewTodoName(event.target.value)}","        />","      </Grid.Column>","      <Grid.Column width={16}>","        <Divider />","      </Grid.Column>","    </Grid.Row>","  )","}","","function calculateDueDate() {","  const date = new Date()","  date.setDate(date.getDate() + 7)","  return dateFormat(date, 'yyyy-mm-dd')","}",""]}],[{"start":{"row":0,"column":0},"end":{"row":63,"column":0},"action":"remove","lines":["import { useAuth0 } from '@auth0/auth0-react'","import dateFormat from 'dateformat'","import React, { useState } from 'react'","import { Divider, Grid, Input } from 'semantic-ui-react'","import { createTodo } from '../api/todos-api'","","export function NewTodoInput({ onNewTodo }) {","  const [newTodoName, setNewTodoName] = useState('')","","  const { getAccessTokenSilently } = useAuth0()","","  const onTodoCreate = async () => {","    try {","      const accessToken = await getAccessTokenSilently({","        audience: process.env.REACT_APP_AUTH0_AUDIENCE,","        scope: \"openid profile email\"","      })","","      const dueDate = calculateDueDate()","","      // ✔ FIX: pass the real token, not the function","      const createdTodo = await createTodo(accessToken, {","        name: newTodoName,","        dueDate","      })","","      onNewTodo(createdTodo)","","    } catch (e) {","      console.log(\"Failed to create a new TODO\", e)","      alert(\"Todo creation failed\")","    }","  }","","  return (","    <Grid.Row>","      <Grid.Column width={16}>","        <Input","          action={{","            color: 'teal',","            labelPosition: 'left',","            icon: 'add',","            content: 'New task',","            onClick: onTodoCreate","          }}","          fluid","          actionPosition=\"left\"","          placeholder=\"To change the world...\"","          onChange={(event) => setNewTodoName(event.target.value)}","        />","      </Grid.Column>","      <Grid.Column width={16}>","        <Divider />","      </Grid.Column>","    </Grid.Row>","  )","}","","function calculateDueDate() {","  const date = new Date()","  date.setDate(date.getDate() + 7)","  return dateFormat(date, 'yyyy-mm-dd')","}",""],"id":10},{"start":{"row":0,"column":0},"end":{"row":60,"column":0},"action":"insert","lines":["import { useAuth0 } from '@auth0/auth0-react'","import dateFormat from 'dateformat'","import React, { useState } from 'react'","import { Divider, Grid, Input } from 'semantic-ui-react'","import { createTodo } from '../api/todos-api'","","export function NewTodoInput({ onNewTodo }) {","  const [newTodoName, setNewTodoName] = useState('')","  const { getAccessTokenSilently } = useAuth0()","","  const onTodoCreate = async () => {","    try {","      const token = await getAccessTokenSilently({","        audience: process.env.REACT_APP_AUTH0_AUDIENCE","      })","","      const dueDate = calculateDueDate()","","      const newTodo = await createTodo(token, {","        name: newTodoName,","        dueDate","      })","","      onNewTodo(newTodo)","    } catch (e) {","      console.log('Failed to created a new TODO', e)","      alert('Todo creation failed')","    }","  }","","  return (","    <Grid.Row>","      <Grid.Column width={16}>","        <Input","          action={{","            color: 'teal',","            labelPosition: 'left',","            icon: 'add',","            content: 'New task',","            onClick: onTodoCreate","          }}","          fluid","          actionPosition=\"left\"","          placeholder=\"To change the world...\"","          onChange={(e) => setNewTodoName(e.target.value)}","        />","      </Grid.Column>","","      <Grid.Column width={16}>","        <Divider />","      </Grid.Column>","    </Grid.Row>","  )","}","","function calculateDueDate() {","  const date = new Date()","  date.setDate(date.getDate() + 7)","  return dateFormat(date, 'yyyy-mm-dd')","}",""]}]]},"ace":{"folds":[],"scrolltop":713,"scrollleft":0,"selection":{"start":{"row":60,"column":0},"end":{"row":60,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1763845754168,"hash":"3e5bf7499780be46bbe90b9675c313adbb82e168"}